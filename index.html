<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MindBloow — AI Interactive</title>
  <meta name="description" content="MindBloow — Edukasi, Tes, dan Konsultasi AI untuk kesehatan mental .">

  <style>
  :root{
    --bg: #FBFDFF;
    --card: #ffffff;
    --muted: #62718a;
    --primary: #4f73ff;
    --accent: #ff9ebd;
    --radius: 14px;
    --gap: 16px;
    --shadow: 0 10px 30px rgba(12,34,56,0.06);
    font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#FBFDFF,#F7FAFF 60%);color:#0f172a}

  /* Layout */
  .site{display:flex;flex-direction:column;min-height:100vh}
  header{background:transparent;padding:14px 20px;position:sticky;top:0;z-index:60}
  .nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:10px}
  .brand .logo{font-weight:700;color:var(--primary);font-size:20px}
  .menu{display:flex;gap:8px}
  .menu button{background:transparent;border:0;padding:8px 12px;border-radius:10px;font-weight:600;color:var(--muted);cursor:pointer}
  .menu button[aria-current="true"]{background:linear-gradient(90deg,var(--primary),var(--accent));color:white;box-shadow:var(--shadow)}
  .nav-toggle{display:none;background:transparent;border:0;padding:8px;border-radius:10px}

  main{flex:1;max-width:1100px;margin:20px auto;padding:20px;width:100%}
  .page{display:none}
  .page.active{display:block}

  /* Cards */
  .grid{display:grid;gap:18px}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  .card{background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:var(--shadow)}

  /* Hero */
  .hero{display:flex;align-items:center;gap:24px;padding:28px;border-radius:14px;background:linear-gradient(135deg,#eaf4ff,#fff0f6)}
  .hero h1{margin:0;font-size:28px}
  .hero p{margin:6px 0;color:var(--muted)}

  /* Edu: illustration */
  .illustration{display:flex;align-items:center;justify-content:center;padding:20px;border-radius:12px;background:linear-gradient(180deg,#fff,#F6FAFF);box-shadow:0 6px 20px rgba(79,115,255,0.06)}
  .illus-svg{width:100%;height:auto;max-width:420px}

  /* Quiz */
  .quiz-card{display:flex;flex-direction:column;gap:12px}
  .progress{height:12px;background:#eef6ff;border-radius:999px;overflow:hidden}
  .progress > i{display:block;height:100%;width:0;background:linear-gradient(90deg,#6fb3ff,#ff9ebd);transition:width 300ms ease}
  .question{background:rgba(255,255,255,0.95);padding:14px;border-radius:10px}
  .choices{display:flex;gap:8px;flex-wrap:wrap}
  .choice{flex:1;padding:10px;border-radius:10px;border:1px solid #e6eef8;text-align:center;cursor:pointer;background:white}
  .choice.selected{background:linear-gradient(90deg,var(--primary),var(--accent));color:#fff;border-color:transparent}

  .result{padding:12px;border-radius:10px;background:#fff9f9;border:1px solid #ffe6ed}

  /* Chat AI */
  .chat{display:flex;flex-direction:column;gap:10px}
  .history{min-height:120px;max-height:420px;overflow:auto;padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfbff)}
  .bubble{padding:10px;border-radius:12px;margin-bottom:8px;max-width:78%}
  .bubble.user{background:#e8f4ff;margin-left:auto}
  .bubble.bot{background:#fff0f6}
  .quick-replies{display:flex;gap:8px;flex-wrap:wrap}
  .chip{padding:8px 10px;border-radius:999px;border:1px solid #e6eef8;background:white;cursor:pointer}

  /* EDU detailed list */
  .disorders{display:flex;flex-direction:column;gap:12px;margin-top:12px}
  .disorder{border:1px solid #eef6ff;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fcfcff)}
  .disorder h3{margin:0 0 6px 0}
  .disorder .meta{color:var(--muted);font-size:14px;margin-bottom:8px}
  .disorder .more{display:none;margin-top:8px}
  .disorder.open .more{display:block}
  .disorder .toggle{background:transparent;border:0;color:var(--primary);font-weight:700;cursor:pointer}

  /* Footer */
  footer{padding:20px;text-align:center;color:var(--muted)}

  /* Responsive */
  @media (max-width:900px){
    .grid.cols-3{grid-template-columns:1fr}
    .menu{display:none}
    .nav-toggle{display:inline-flex}
  }
  @media (max-width:600px){
    .hero{flex-direction:column;align-items:flex-start}
    main{padding:12px}
  }
  </style>
</head>
<body>
  <div class="site">
    <header>
      <div class="nav-inner">
        <div class="brand">
          <div class="logo">MindBloow</div>
        </div>

        <nav>
          <div class="menu" role="tablist" aria-label="Main navigation">
            <button data-page="home" aria-current="true">Beranda</button>
            <button data-page="edu">Edukasi</button>
            <button data-page="signs">Tanda-tanda</button>
            <button data-page="help">Cara Mengatasi</button>
            <button data-page="test">Tes Mental</button>
            <button data-page="consult">Konsultasi</button>
          </div>
          <button class="nav-toggle" aria-label="Buka menu">☰</button>
        </nav>
      </div>
    </header>

    <main>
      <!-- HOME -->
      <section id="home" class="page active">
        <div class="hero card">
          <div>
            <h1>Jaga Kesehatan Mentalmu</h1>
            <p>Self-screening, edukasi, dan dukungan awal berbasis pola — demo AI ringan.</p>
            <div style="margin-top:12px"><button data-page="test" class="chip">Mulai Tes</button> <button data-page="consult" class="chip">Konsultasi Sekarang</button></div>
          </div>
          <div class="illustration" aria-hidden="true">
            <!-- soft pastel svg illustration (inline so no external images needed) -->
            <svg class="illus-svg" viewBox="0 0 560 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ilustrasi lembut">
              <defs>
                <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#E8F4FF"/><stop offset="1" stop-color="#FFF0F6"/></linearGradient>
              </defs>
              <rect x="0" y="0" width="560" height="360" rx="18" fill="url(#g1)" />
              <g transform="translate(40,40)">
                <ellipse cx="220" cy="140" rx="90" ry="85" fill="#FFF" opacity="0.9" />
                <circle cx="120" cy="120" r="36" fill="#FFDEE9" opacity="0.9" />
                <circle cx="300" cy="80" r="28" fill="#DFF7FF" opacity="0.95" />
                <path d="M70 220c35-30 210-30 250 0v20H70z" fill="#fff" opacity="0.6" />
              </g>
            </svg>
          </div>
        </div>
      </section>

      <!-- EDUKASI -->
      <section id="edu" class="page">
        <div class="card">
          <h2>Edukasi Lengkap: Kondisi Kesehatan Mental Umum</h2>
          <p class="muted">Di bawah ini adalah ringkasan singkat tiap kondisi — gunakan sebagai materi edukasi dan rujukan awal. Informasi bersifat umum, bukan pengganti diagnosis profesional.</p>

          <div style="display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap;margin-top:16px">
            <div style="flex:1;min-width:320px">

              <!-- Short overview cards -->
              <div class="grid cols-3">
                <div class="card"><h3>Depresi</h3><p>Gangguan suasana hati yang menurunkan energi dan minat.</p></div>
                <div class="card"><h3>Kecemasan</h3><p>Khawatir berlebih yang mengganggu aktivitas harian.</p></div>
                <div class="card"><h3>Burnout</h3><p>Kelelahan kronis akibat tekanan yang berkepanjangan.</p></div>
              </div>

              <!-- Detailed disorders list (requested additions) -->
              <div class="disorders" id="disordersList">

                <article class="disorder" data-key="depresi">
                  <h3>1. Depresi (Gangguan Depresif Mayor)</h3>
                  <div class="meta">Definisi singkat: Gangguan suasana hati persisten yang menyebabkan perasaan sedih, kehilangan minat, dan penurunan energi yang signifikan.</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Perasaan sedih, hampa, atau putus asa hampir setiap hari</li>
                      <li>Hilangnya minat atau kesenangan pada aktivitas yang biasanya dinikmati</li>
                      <li>Perubahan berat badan atau nafsu makan</li>
                      <li>Gangguan tidur (insomnia atau tidur berlebihan)</li>
                      <li>Kesulitan berkonsentrasi dan energi menurun</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika gejala berlangsung lebih dari dua minggu, mengganggu fungsi sehari-hari, atau muncul pemikiran untuk menyakiti diri sendiri, segera hubungi profesional kesehatan mental.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Mencari dukungan sosial (teman, keluarga)</li><li>Mencoba konseling atau terapi perilaku-kognitif (CBT)</li><li>Jika perlu, evaluasi oleh psikiater untuk pertimbangan pengobatan.</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="kecemasan">
                  <h3>2. Kecemasan (Gangguan Kecemasan Umum)</h3>
                  <div class="meta">Definisi singkat: Perasaan khawatir dan ketegangan yang berlebihan, tidak proporsional, dan sulit dikendalikan tentang kejadian sehari-hari.</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Kekhawatiran yang berlebihan dan konstan tentang berbagai hal</li>
                      <li>Gelisah, ketegangan otot, mudah lelah</li>
                      <li>Kesulitan berkonsentrasi dan gangguan tidur</li>
                      <li>Sering mengalami kecemasan tanpa pemicu nyata</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika kecemasan mengganggu pekerjaan, hubungan, atau aktivitas sehari-hari dan teknik koping sederhana tidak membantu, pertimbangkan evaluasi profesional.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Latihan pernapasan dan relaksasi progresif</li><li>Terapi kognitif-perilaku (CBT)</li><li>Pelatihan manajemen stres dan kebiasaan tidur sehat.</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="burnout">
                  <h3>3. Burnout (Kelelahan Emosional)</h3>
                  <div class="meta">Definisi singkat: Kondisi kelelahan fisik, emosional, dan mental yang ekstrem akibat stres kerja jangka panjang dan intens.</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Kelelahan kronis yang tidak hilang setelah istirahat</li>
                      <li>Sinisme atau jarak emosional terhadap pekerjaan</li>
                      <li>Penurunan produktivitas dan perasaan tidak kompeten</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mengambil tindakan:</strong>
                    <p>Jika merasa sering kewalahan oleh pekerjaan dan mengalami gangguan tidur/emosi, pertimbangkan cuti, konsultasi dengan atasan, serta dukungan profesional.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Atur batasan kerja dan istirahat terjadwal</li><li>Delegasi tugas bila memungkinkan</li><li>Terapkan rutinitas pemulihan: olahraga ringan, tidur, hobi.</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="bipolar">
                  <h3>4. Gangguan Bipolar</h3>
                  <div class="meta">Definisi singkat: Gangguan suasana hati yang ditandai dengan perubahan ekstrem antara episode manik (sangat gembira/enerjik) dan depresif (sangat sedih/lemah).</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Episode manik: energi sangat tinggi, sedikit kebutuhan tidur, perilaku impulsif</li>
                      <li>Episode depresif: suasana hati rendah, kehilangan minat, kelelahan</li>
                      <li>Perubahan mood yang jelas dan berbeda dari perilaku biasanya</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika ada perubahan suasana hati yang ekstrem atau perilaku berisiko selama periode manik, segera cari evaluasi psikiatri—gangguan bipolar biasanya memerlukan pengobatan jangka panjang.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Catat pola tidur dan mood untuk membantu diagnosis</li><li>Konsultasikan dengan psikiater untuk rencana pengobatan</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="skizofrenia">
                  <h3>5. Skizofrenia</h3>
                  <div class="meta">Definisi singkat: Gangguan otak kronis yang memengaruhi cara seseorang berpikir, merasakan, dan berperilaku, seringkali ditandai dengan psikosis (delusi atau halusinasi).</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Delusi (percaya hal yang tidak nyata) atau halusinasi (mendengar/ melihat yang tidak ada)</li>
                      <li>Pikiran yang tidak teratur, penarikan sosial</li>
                      <li>Penurunan fungsi sehari-hari (pekerjaan, perawatan diri)</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika ada tanda psikosis atau perubahan besar pada realitas/perilaku, segera cari bantuan medis—penanganan dini meningkatkan hasil jangka panjang.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Konsultasi ke psikiater untuk evaluasi dan pengobatan</li><li>Dukungan keluarga dan rujukan ke layanan rehabilitasi bila perlu</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="ptsd">
                  <h3>6. Gangguan Stres Pasca Trauma (PTSD)</h3>
                  <div class="meta">Definisi singkat: Kondisi yang dipicu setelah mengalami atau menyaksikan peristiwa traumatis, ditandai dengan flashback, mimpi buruk, dan kecemasan parah.</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Flashback atau kilas balik terhadap peristiwa</li>
                      <li>Mimpi buruk berulang, menghindari pengingat trauma</li>
                      <li>Kewaspadaan berlebih dan reaksi kaget</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika gejala berlangsung lebih dari sebulan dan mengganggu kehidupan sehari-hari, carilah psikoterapi khusus (mis. terapi berbasis trauma) dan dukungan profesional.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Cari terapis yang berpengalaman dalam trauma</li><li>Teknik grounding dan pernapasan untuk mengurangi flashback</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

                <article class="disorder" data-key="ocd">
                  <h3>7. Gangguan Obsesif Kompulsif (OCD)</h3>
                  <div class="meta">Definisi singkat: Gangguan yang melibatkan pikiran yang mengganggu dan berulang (obsesi) serta dorongan kuat untuk melakukan perilaku berulang (kompulsi).</div>
                  <div><strong>Gejala umum:</strong>
                    <ul>
                      <li>Obsesi: pikiran atau gambaran yang tidak diinginkan, berulang</li>
                      <li>Kompulsi: ritual perilaku untuk meredakan kecemasan (mis. mencuci berulang)</li>
                      <li>Waktu yang signifikan dihabiskan untuk ritual, mengganggu aktivitas</li>
                    </ul>
                  </div>
                  <div class="more">
                    <strong>Kapan mencari bantuan:</strong>
                    <p>Jika obsesi/kompulsi menghabiskan banyak waktu atau mengganggu fungsi sehari-hari, terapi perilaku-kognitif khusus (ERP) dan/atau obat dapat membantu.</p>
                    <strong>Saran awal:</strong>
                    <ul><li>Terapi Eksposur dan Pencegahan Respons (ERP)</li><li>Konsultasi dengan profesional kesehatan mental untuk pendekatan terstruktur</li></ul>
                    <button class="toggle" aria-expanded="false">Tutup</button>
                  </div>
                </article>

              </div>
            </div>

            <div style="width:320px">
              <!-- larger pastel illustration for edu page -->
              <div class="illustration card" role="img" aria-label="Ilustrasi edukasi pastel">
                <svg viewBox="0 0 360 360" class="illus-svg" xmlns="http://www.w3.org/2000/svg">
                  <defs>
                    <linearGradient id="eduGrad" x1="0" x2="1"><stop offset="0" stop-color="#FFF1F6"/><stop offset="1" stop-color="#F0FBFF"/></linearGradient>
                  </defs>
                  <rect width="100%" height="100%" rx="12" fill="url(#eduGrad)"/>
                  <g transform="translate(20,20)">
                    <circle cx="90" cy="90" r="62" fill="#FFEAF2" />
                    <rect x="150" y="40" width="140" height="110" rx="14" fill="#E8F7FF" />
                    <path d="M10 220c40-28 220-24 280 0v24H10z" fill="#FFFFFF" opacity="0.9" />
                  </g>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SIGNS -->
      <section id="signs" class="page">
        <div class="card">
          <h2>Tanda-tanda yang Perlu Diperhatikan</h2>
          <p class="muted">Berikut adalah langkah-langkah dan kebiasaan positif yang dapat membantu menjaga kesehatan mental serta mengatasi tanda-tanda awal stres, kecemasan, maupun kelelahan emosional.</p>
          <ol>
            <li><strong>Curhat kepada teman yang dipercaya</strong><br>Berbicara dengan seseorang yang memahami dapat membantu meringankan beban emosional dan memberikan sudut pandang baru.</li>

            <li><strong>Istirahat yang cukup</strong><br>Tidur 7–9 jam per malam membantu pemulihan tubuh dan pikiran.</li>

            <li><strong>Melakukan journaling</strong><br>Menuliskan perasaan membantu mengelola emosi dan memahami pola pikiran.</li>

            <li><strong>Mencari bantuan profesional bila perlu</strong><br>Psikolog atau psikiater dapat memberikan evaluasi yang lebih spesifik dan penanganan yang sesuai.</li>

            <li><strong>Fokus pada pola makan sehat</strong><br>Nutrisi seimbang berpengaruh pada suasana hati, energi, dan fungsi otak.</li>

            <li><strong>Tentukan batasan yang jelas (Boundary Setting)</strong><br>Belajar mengatakan "tidak" dan menjaga ruang pribadi mencegah kelelahan emosional.</li>

            <li><strong>Lakukan hobi atau kegiatan kreatif</strong><br>Kegiatan seperti menggambar, memasak, musik, atau membuat kerajinan dapat meningkatkan suasana hati.</li>

            <li><strong>Terlibat dalam aktivitas fisik</strong><br>Olahraga ringan seperti berjalan 20 menit sudah dapat menurunkan stres dan meningkatkan keseimbangan emosi.</li>

            <li><strong>Latih teknik relaksasi</strong><br>Misalnya pernapasan dalam, grounding 5-4-3-2-1, atau meditasi singkat.</li>

            <li><strong>Paparan sinar matahari dan alam</strong><br>Berada di luar ruangan 10–20 menit membantu meningkatkan vitamin D dan suasana hati.</li>
          </ol>
        </div>
      </section>

      <!-- HELP -->
      <section id="help" class="page">
        <div class="card">
          <h2>Cara Mengatasi — Tips Singkat</h2>
          <ol>
            <li>Curhat kepada teman yang dipercaya</li>
            <li>Istirahat yang cukup</li>
            <li>Melakukan journaling</li>
            <li>Mencari bantuan profesional bila perlu</li>
          </ol>
        </div>
      </section>

      <!-- TEST -->
      <section id="test" class="page">
        <div class="card quiz-card">
          <h2>Tes Interaktif (GAD-like singkat)</h2>
          <p class="muted">Pilih jawaban untuk setiap pertanyaan — hasil bersifat indikatif, bukan diagnosis.</p>

          <div class="progress" aria-hidden="false"><i id="progressFill"></i></div>
          <div id="qArea"></div>

          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
            <button id="prevQ" class="chip" style="display:none">Kembali</button>
            <button id="nextQ" class="chip">Lanjut</button>
          </div>

          <div id="resultBox" class="result" style="display:none;margin-top:12px"></div>
        </div>
      </section>

      <!-- CONSULT -->
      <section id="consult" class="page">
        <div class="card chat">
          <h2>Konsultasi — AI Support (demo)</h2>
          <div id="history" class="history" aria-live="polite"></div>

          <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
            <input id="story" placeholder="Ceritakan apa yang kamu rasakan..." style="flex:1;padding:12px;border-radius:10px;border:1px solid #e6eef8" />
            <button id="sendBtn" class="chip">Kirim</button>
            <button id="clearBtn" class="chip">Bersihkan</button>
          </div>

          <div style="margin-top:8px" class="quick-replies" aria-hidden="false">
            <button class="chip quick" data-q="cemas">Saya cemas</button>
            <button class="chip quick" data-q="sedih">Saya sedih</button>
            <button class="chip quick" data-q="tidur">Sulit tidur</button>
            <button class="chip quick" data-q="sendiri">Saya merasa sendiri</button>
          </div>
        </div>
      </section>

    </main>

    <footer>
      <small>© 2025 MindBloow — Demo. Bukan pengganti profesional.</small>
    </footer>
  </div>

  <script>
  // Simple SPA navigation
  (function(){
    const buttons = document.querySelectorAll('[data-page]');
    const pages = document.querySelectorAll('.page');

    function show(pageId){
      pages.forEach(p => p.classList.toggle('active', p.id === pageId));
      buttons.forEach(b => b.setAttribute('aria-current', b.dataset.page === pageId ? 'true' : 'false'));
      // update hash for back/forward
      history.replaceState(null, '', '#'+pageId);
    }

    buttons.forEach(b => b.addEventListener('click', () => show(b.dataset.page)));

    // initialize from hash
    const initial = (location.hash && location.hash.replace('#','')) || 'home';
    show(initial);

    // small nav toggle for mobile
    const navToggle = document.querySelector('.nav-toggle');
    const menu = document.querySelector('.menu');
    navToggle.addEventListener('click', () => {
      const shown = menu.style.display === 'flex';
      menu.style.display = shown ? 'none' : 'flex';
    });

    // close mobile menu on click outside
    document.addEventListener('click', (e) => {
      if (!menu.contains(e.target) && !navToggle.contains(e.target) && window.innerWidth < 900) menu.style.display = 'none';
    });

  })();

  /* -------- QUIZ LOGIC (interactive, 7 q) -------- */
  (function(){
    const questions = [
      'Merasa gugup, gelisah, atau tegang?',
      'Tidak dapat berhenti atau mengendalikan kekhawatiran?',
      'Khawatir berlebihan tentang berbagai hal?',
      'Sulit santai?',
      'Sulit untuk berhenti merasa khawatir?',
      'Sulit untuk tidur karena kecemasan?',
      'Kehilangan minat karena khawatir terus?'
    ];

    const qArea = document.getElementById('qArea');
    const prev = document.getElementById('prevQ');
    const next = document.getElementById('nextQ');
    const progress = document.getElementById('progressFill');
    const resultBox = document.getElementById('resultBox');

    let idx = 0;
    let answers = new Array(questions.length).fill(null);

    function render(i){
      qArea.innerHTML = '';
      const q = document.createElement('div'); q.className='question';
      const h = document.createElement('h3'); h.innerText = (i+1) + '. ' + questions[i];
      q.appendChild(h);

      const choices = document.createElement('div'); choices.className='choices';
      const labels = ['Tidak sama sekali','Beberapa hari','Lebih dari setengah hari','Hampir setiap hari'];
      for(let j=0;j<4;j++){
        const btn = document.createElement('button');
        btn.className = 'choice'; btn.innerText = labels[j]; btn.dataset.val = j;
        if (answers[i] === j) btn.classList.add('selected');
        btn.addEventListener('click', ()=>{
          answers[i] = j; updateSelected(i); // keep same index
        });
        choices.appendChild(btn);
      }

      q.appendChild(choices);
      qArea.appendChild(q);

      const denom = Math.max(1, (questions.length - 1));
      const pct = Math.round((i/denom)*100);
      progress.style.width = pct + '%';

      prev.style.display = (i===0)? 'none':'inline-flex';
      next.innerText = (i < questions.length-1) ? 'Lanjut' : 'Selesai';
      resultBox.style.display = 'none';
    }

    function updateSelected(i){
      const nodes = qArea.querySelectorAll('.choice');
      nodes.forEach(n => n.classList.toggle('selected', Number(n.dataset.val) === answers[i]));
    }

    prev.addEventListener('click', ()=>{ if (idx>0){ idx--; render(idx);} });
    next.addEventListener('click', ()=>{
      if (answers[idx] === null){ alert('Pilih jawaban dahulu untuk melanjutkan.'); return; }
      if (idx < questions.length-1){ idx++; render(idx); }
      else { showResult(); }
    });

    function showResult(){
      const sum = answers.reduce((s,v)=> s + (v ?? 0), 0);
      const max = questions.length * 3;
      let category='', label='';
      if (sum >= Math.round(max * 0.7)){ category='Tinggi'; label='Tinggi — Perlu perhatian profesional'; }
      else if (sum >= Math.round(max * 0.4)){ category='Sedang'; label='Sedang — Perhatikan & pertimbangkan konsultasi'; }
      else { category='Ringan'; label='Ringan — Perawatan diri & pemantauan'; }

      const suggestions = {
        'Ringan': ['Coba rutinitas tidur yang konsisten.','Lakukan latihan pernapasan 5 menit setiap hari.','Berbagi cerita ke teman atau keluarga.'],
        'Sedang': ['Pertimbangkan journaling harian.','Coba konseling jangka pendek atau layanan konselor sekolah/komunitas.','Kurangi konsumsi berita bila itu memicu kecemasan.'],
        'Tinggi': ['Segera cari bantuan profesional (psikolog/psikiater) untuk evaluasi lebih lanjut.','Jika ada pikiran untuk menyakiti diri sendiri, hubungi layanan darurat segera.','Dukungan dari orang terdekat sangat penting — jangan menanggung sendiri.']
      };

      resultBox.style.display = 'block';
      resultBox.innerHTML = `<h3>Hasil Tes</h3><p class="muted">Skor: <strong>${sum}</strong> / ${max} — <strong>${label}</strong></p><div><strong>Saran awal:</strong><ul>${suggestions[category].map(s=>`<li>${s}</li>`).join('')}</ul></div><div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button id="retake" class="chip">Ulangi</button><button id="talk" class="chip" data-goto="consult">Konsultasi</button></div>`;
      document.getElementById('retake').addEventListener('click', ()=>{ answers = new Array(questions.length).fill(null); idx=0; render(idx); progress.style.width = '0%'; resultBox.style.display='none'; });
      document.getElementById('talk').addEventListener('click', (e)=>{ const goto = e.target.dataset.goto; document.querySelector(`[data-page="${goto}"]`).click(); });

      progress.style.width = '100%';
    }

    // init
    render(0);
  })();

  /* --------- CONSULT CHAT (interactive replies + quick replies) --------- */
  (function(){
    const history = document.getElementById('history');
    const story = document.getElementById('story');
    const sendBtn = document.getElementById('sendBtn');
    const clearBtn = document.getElementById('clearBtn');
    const quicks = document.querySelectorAll('.quick');

    function append(text, who='bot'){
      const el = document.createElement('div'); el.className = 'bubble ' + (who==='user'?'user':'bot');
      el.innerHTML = `<div>${escapeHtml(text)}</div>`;
      history.appendChild(el); history.scrollTop = history.scrollHeight;
    }
    function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    function analyze(text){
      const t = text.toLowerCase();
      const responses = [];
      if (t.includes('cemas')||t.includes('khawatir')||t.includes('gelisah')) responses.push('Coba tarik napas dalam-dalam 4 kali secara perlahan (4-4-4). Mau aku berikan panduan singkat?');
      if (t.includes('sedih')||t.includes('menangis')||t.includes('down')) responses.push('Aku dengar kamu sedih. Menuliskan tiga hal kecil yang berjalan baik hari ini bisa membantu. Mau coba?');
      if (t.includes('tidur')||t.includes('insomnia')||t.includes('susah tidur')) responses.push('Coba matikan layar 30 menit sebelum tidur dan lakukan rutinitas ringan seperti peregangan.');
      if (t.includes('sendiri')||t.includes('kesepian')) responses.push('Kamu tidak sendirian. Punya seseorang yang bisa diajak bicara sekarang?');
      if (responses.length === 0) responses.push('Terima kasih sudah berbagi. Mau ceritakan lebih detail kapan ini mulai terjadi?');
      return responses.slice(0,3);
    }

    async function botReply(userText){
      append('...', 'bot');
      await new Promise(r=>setTimeout(r,600));
      const last = history.querySelector('.bubble.bot:last-child'); if (last && last.textContent === '...') last.remove();
      const out = analyze(userText);
      out.forEach(o=> append(o,'bot'));
      // offer next actions as chips
      const actions = document.createElement('div'); actions.className = 'quick-replies';
      actions.innerHTML = '<button class="chip" onclick="document.querySelector(\'[data-page="test"]\').click()">Lakukan Tes</button> <button class="chip" onclick="alert(\'Jika butuh bantuan darurat, hubungi layanan setempat.\')">Info Darurat</button>';
      history.appendChild(actions); history.scrollTop = history.scrollHeight;
    }

    sendBtn.addEventListener('click', async ()=>{
      const text = (story.value||'').trim();
      if (!text) return; append(text,'user'); story.value=''; await botReply(text);
    });

    clearBtn.addEventListener('click', ()=>{ history.innerHTML=''; story.value=''; story.focus(); });
    quicks.forEach(q => q.addEventListener('click', async (e)=>{ const t = e.target.dataset.q; story.value = (t==='cemas')? 'Saya cemas akhir-akhir ini' : (t==='sedih')? 'Saya sering sedih' : (t==='tidur')? 'Saya susah tidur' : 'Saya merasa sendiri'; sendBtn.click(); }));

    // keyboard send (Ctrl+Enter)
    story.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' && (e.ctrlKey||e.metaKey)){ sendBtn.click(); } });

  })();

  /* --------- EDU: Accordion toggles for "Lebih Lanjut" on disorders --------- */
  (function(){
    const disorders = document.querySelectorAll('.disorder');
    disorders.forEach(d => {
      const toggle = d.querySelector('.toggle');
      if (!toggle) return;
      toggle.addEventListener('click', ()=>{
        const isOpen = d.classList.toggle('open');
        toggle.innerText = isOpen ? 'Tutup' : 'Buka detail';
        toggle.setAttribute('aria-expanded', String(isOpen));
      });
      // make header clickable to open
      d.querySelector('h3').addEventListener('click', ()=>{
        const isOpen = d.classList.toggle('open');
        const t = d.querySelector('.toggle'); if (t) { t.innerText = isOpen ? 'Tutup' : 'Buka detail'; t.setAttribute('aria-expanded', String(isOpen)); }
      });
    });
  })();

  </script>
</body>
</html>
