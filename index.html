<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MindBloow — AI Interactive</title>
  <meta name="description" content="MindBloow — Edukasi, Tes, dan Konsultasi AI untuk kesehatan mental.">

  <style>
  :root{
    --bg: #FBFDFF;
    --card: #ffffff;
    --muted: #62718a;
    --primary: #4f73ff;
    --accent: #ff9ebd;
    --radius: 14px;
    --gap: 16px;
    --shadow: 0 10px 30px rgba(12,34,56,0.06);
    font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  }

  *{box-sizing:border-box}
  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(180deg,#FBFDFF,#F7FAFF 60%);
    color:#0f172a;
  }

  .site{
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }

  /* FIXED HEADER */
  header{
    background:#ffffffdd;
    backdrop-filter:blur(10px);
    padding:14px 20px;
    position:fixed;
    top:0;
    left:0;
    right:0;
    z-index:200;
    border-bottom:1px solid #e3e9f4;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
  }

  main{
    max-width:1100px;
    margin:90px auto 0;
    padding:20px;
    width:100%;
  }

  .nav-inner{
    max-width:1100px;
    margin:0 auto;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }

  .brand{
    display:flex;
    align-items:center;
    gap:10px;
  }

  .brand .logo{
    font-weight:700;
    color:var(--primary);
    font-size:20px;
  }

  nav{position:relative;}

  .menu{
    display:flex;
    gap:8px;
  }

  .menu button{
    background:transparent;
    border:0;
    padding:8px 12px;
    border-radius:10px;
    font-weight:600;
    color:var(--muted);
    cursor:pointer;
  }

  .menu button[aria-current="true"]{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    box-shadow:var(--shadow);
  }

  .nav-toggle{
    display:none;
    background:transparent;
    border:0;
    padding:8px;
    font-size:22px;
    cursor:pointer;
  }

  .page{display:none;}
  .page.active{display:block;}
    <main>
      <!-- HOME -->
      <section id="home" class="page active">

        <div class="hero card">
          <div>
            <h1>Jaga Kesehatan Mentalmu</h1>
            <p>Self-screening, edukasi, dan dukungan awal berbasis pola — demo AI ringan.</p>

            <div style="margin-top:12px">
              <button data-page="test" class="chip">Mulai Tes</button>
              <button data-page="consult" class="chip">Konsultasi Sekarang</button>
            </div>
          </div>

          <!-- SLIDESHOW FOTO (Tetap menggunakan foto yang kamu upload) -->
          <div class="illustration" aria-hidden="true"
            style="position:relative;width:300px;height:200px;overflow:hidden;border-radius:14px;">

            <img id="slideShow"
              src=""
              style="width:100%;height:100%;object-fit:cover;border-radius:14px;transition:opacity .6s ease;opacity:1;">
          </div>
        </div>

      </section>
      <!-- EDUKASI -->
      <section id="edu" class="page">
        <div class="card">
          <h2>Edukasi Lengkap: Kondisi Kesehatan Mental Umum</h2>
          <p class="muted">
            Ringkasan singkat tiap kondisi — sebagai edukasi dan rujukan awal (bukan diagnosis).
          </p>

          <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:16px">

            <div style="flex:1;min-width:320px">

              <!-- Short Cards -->
              <div class="grid cols-3">
                <div class="card"><h3>Depresi</h3><p>Penurunan energi dan minat.</p></div>
                <div class="card"><h3>Kecemasan</h3><p>Rasa khawatir berlebih.</p></div>
                <div class="card"><h3>Burnout</h3><p>Kelelahan emosional kronis.</p></div>
              </div>

              <!-- DETAIL LIST -->
              <div class="disorders" id="disordersList">

                <!-- 1 -->
                <article class="disorder" data-key="depresi">
                  <h3>1. Depresi</h3>
                  <div class="meta">Gangguan suasana hati persisten.</div>
                  <div><strong>Gejala:</strong>
                    <ul>
                      <li>Perasaan sedih</li>
                      <li>Hilang minat</li>
                      <li>Gangguan tidur</li>
                    </ul>
                  </div>
                  <div class="more">
                    <p><strong>Saran awal:</strong></p>
                    <ul><li>Dukungan sosial</li><li>CBT</li></ul>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 2 -->
                <article class="disorder" data-key="kecemasan">
                  <h3>2. Kecemasan</h3>
                  <div class="meta">Khawatir berlebihan.</div>
                  <div><strong>Gejala:</strong>
                    <ul><li>Gelisah</li><li>Ketegangan otot</li></ul>
                  </div>
                  <div class="more">
                    <p><strong>Saran awal:</strong></p>
                    <ul><li>Napas 4-4-4</li><li>CBT</li></ul>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 3 -->
                <article class="disorder" data-key="burnout">
                  <h3>3. Burnout</h3>
                  <div class="meta">Kelelahan emosional.</div>
                  <div class="more">
                    <p>Istirahat + batasan kerja penting.</p>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 4 -->
                <article class="disorder" data-key="bipolar">
                  <h3>4. Bipolar</h3>
                  <div class="meta">Perubahan mood ekstrem.</div>
                  <div class="more">
                    <p>Butuh evaluasi psikiater.</p>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 5 -->
                <article class="disorder" data-key="skizofrenia">
                  <h3>5. Skizofrenia</h3>
                  <div class="meta">Dapat melibatkan halusinasi.</div>
                  <div class="more">
                    <p>Penanganan jangka panjang diperlukan.</p>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 6 -->
                <article class="disorder" data-key="ptsd">
                  <h3>6. PTSD</h3>
                  <div class="meta">Flashback setelah trauma.</div>
                  <div class="more">
                    <p>Terapi trauma direkomendasikan.</p>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

                <!-- 7 -->
                <article class="disorder" data-key="ocd">
                  <h3>7. OCD</h3>
                  <div class="meta">Obsesi + kompulsi.</div>
                  <div class="more">
                    <p>ERP adalah terapi efektif.</p>
                    <button class="toggle">Tutup</button>
                  </div>
                </article>

              </div>
            </div>

            <!-- ILUSTRASI PASTEL LEMBUT (UPGRADE) -->
            <div style="width:320px">
              <div class="illustration card">
                <svg viewBox="0 0 360 360" class="illus-svg">
                  <defs>
                    <linearGradient id="eduSoftA" x1="0" x2="1">
                      <stop offset="0" stop-color="#FFF4FA"/>
                      <stop offset="1" stop-color="#F0FAFF"/>
                    </linearGradient>
                    <linearGradient id="eduSoftB" x1="0" x2="1">
                      <stop offset="0" stop-color="#FFE9F2"/>
                      <stop offset="1" stop-color="#E8F5FF"/>
                    </linearGradient>
                  </defs>

                  <rect width="100%" height="100%" rx="18" fill="url(#eduSoftA)"/>

                  <circle cx="110" cy="110" r="58" fill="url(#eduSoftB)" opacity="0.85"/>
                  <circle cx="250" cy="90" r="40" fill="#DFF6FF" opacity="0.9"/>
                  <circle cx="210" cy="210" r="70" fill="#FFEAF1" opacity="0.8"/>

                  <path d="M20 270c50-30 220-25 300 0v40H20z" fill="white" opacity="0.7"/>

                </svg>
              </div>
            </div>

          </div>
        </div>
      </section>
/* ---------------- QUIZ LOGIC — UPGRADE INTERAKTIF ---------------- */
(function(){
  const questions = [
    "Merasa gugup atau gelisah?",
    "Sulit mengendalikan rasa khawatir?",
    "Khawatir berlebihan tentang banyak hal?",
    "Sulit untuk rileks?",
    "Sering merasa tegang?",
    "Sulit tidur karena cemas?",
    "Kehilangan minat akibat khawatir?"
  ];

  const labels = [
    "Tidak sama sekali",
    "Beberapa hari",
    "Lebih dari setengah hari",
    "Hampir setiap hari"
  ];

  const qArea = document.getElementById("qArea");
  const prev = document.getElementById("prevQ");
  const next = document.getElementById("nextQ");
  const progress = document.getElementById("progressFill");
  const resultBox = document.getElementById("resultBox");

  let idx = 0;
  let answers = new Array(questions.length).fill(null);

  function animate(el){
    el.style.opacity = 0;
    el.style.transform = "translateY(8px)";
    setTimeout(()=>{
      el.style.transition = ".35s ease";
      el.style.opacity = 1;
      el.style.transform = "translateY(0)";
    },20);
  }

  function render(i){
    qArea.innerHTML = "";

    const wrap = document.createElement("div");
    wrap.className = "question";
    wrap.innerHTML = `<h3>${i+1}. ${questions[i]}</h3>`;

    const choices = document.createElement("div");
    choices.className = "choices";

    labels.forEach((label,j)=>{
      const btn = document.createElement("button");
      btn.className = "choice";
      btn.innerText = label;
      btn.dataset.val = j;
      if(answers[i] === j) btn.classList.add("selected");

      btn.onclick = ()=>{
        answers[i] = j;
        render(i); // re-render so highlight stays clean
      };
      choices.appendChild(btn);
    });

    wrap.appendChild(choices);
    qArea.appendChild(wrap);
    animate(wrap);

    prev.style.display = (i===0)? "none" : "inline-flex";
    next.innerText = (i < questions.length-1) ? "Lanjut" : "Selesai";

    progress.style.width = Math.round(i/(questions.length-1)*100)+"%";
    resultBox.style.display = "none";
  }

  prev.onclick = ()=>{ idx--; render(idx); };
  next.onclick = ()=>{

    if(answers[idx] == null){
      alert("Pilih jawaban dahulu sebelum melanjutkan.");
      return;
    }

    if(idx < questions.length-1){
      idx++;
      render(idx);
    } else {
      showResult();
    }
  };

  function showResult(){
    const total = answers.reduce((a,b)=>a+(b??0),0);
    const max = questions.length * 3;

    let level = "";
    if(total < max*0.33) level = "Ringan";
    else if(total < max*0.66) level = "Sedang";
    else level = "Tinggi";

    const analysis = {
      Ringan: "Gejala kecemasanmu masih tergolong ringan. Ini bisa dipengaruhi aktivitas sehari-hari, pola tidur, atau tekanan ringan.",
      Sedang: "Kecemasanmu tergolong sedang. Gejala ini mulai memengaruhi pikiran & rutinitas harian. Perlu perhatian lebih.",
      Tinggi: "Kecemasanmu tinggi. Ini dapat mengganggu aktivitas harian dan butuh bimbingan profesional."
    };

    const tips = {
      Ringan: ["Tetapkan rutinitas tidur", "Latihan pernapasan 4-4-4", "Kurangi konsumsi media negatif"],
      Sedang: ["Coba journaling emosi", "Atur beban kerja", "Pertimbangkan konseling jangka pendek"],
      Tinggi: ["Pertimbangkan evaluasi psikolog", "Dukungan keluarga penting", "Prioritaskan istirahat & self-care"]
    };

    resultBox.style.display = "block";
    resultBox.innerHTML = `
      <h3>Hasil Tes Mental</h3>
      <p class="muted">Skor kamu: <strong>${total}</strong> / ${max}</p>

      <p><strong>Kategori: ${level}</strong></p>
      <p>${analysis[level]}</p>

      <p><strong>Saran awal:</strong></p>
      <ul>${tips[level].map(t=>`<li>${t}</li>`).join("")}</ul>

      <div style="margin-top:10px;display:flex;gap:8px;">
        <button id="retake" class="chip">Ulangi Tes</button>
        <button id="save" class="chip">Simpan Hasil</button>
        <button id="gotoConsult" class="chip">Konsultasi AI Sekarang</button>
      </div>
    `;

    // event buttons
    document.getElementById("retake").onclick = ()=>{
      answers.fill(null);
      idx = 0;
      progress.style.width = "0%";
      render(0);
    };

    document.getElementById("save").onclick = ()=>{
      const data = {
        skor: total,
        kategori: level,
        waktu: new Date().toLocaleString()
      };
      alert("Hasil tes berhasil disimpan.\n\n" + JSON.stringify(data,null,2));
    };

    document.getElementById("gotoConsult").onclick = ()=>{
      document.querySelector('[data-page="consult"]').click();
    }

    progress.style.width = "100%";
  }

  render(0);
})();
/* ---------------- CONSULT AI — UPGRADE SUPER INTERAKTIF ---------------- */
(function(){

  const history = document.getElementById("history");
  const story = document.getElementById("story");
  const send = document.getElementById("sendBtn");
  const clear = document.getElementById("clearBtn");
  const quicks = document.querySelectorAll(".quick");

  function append(txt, who="bot"){
    const b = document.createElement("div");
    b.className = "bubble "+(who==="user"?"user":"bot");
    b.innerHTML = txt;
    history.appendChild(b);
    history.scrollTop = history.scrollHeight;
  }

  function delay(ms){ return new Promise(r=>setTimeout(r,ms)); }

  function detectEmotion(t){
    let text = t.toLowerCase();

    const mapping = [
      {keys:["cemas","gelisah","takut","khawatir"], emo:"anxiety"},
      {keys:["sedih","down","terpuruk","kecewa","hancur"], emo:"sad"},
      {keys:["sendiri","kesepian","sepi","tidak ada yang peduli"], emo:"lonely"},
      {keys:["capek","lelah","burnout","letih"], emo:"burnout"},
      {keys:["trauma","flashback","kejadian buruk"], emo:"trauma"},
      {keys:["tidur","insomnia"], emo:"sleep"},
      {keys:["marah","emosi"], emo:"anger"},
      {keys:["overthinking","kepikiran terus"], emo:"overthinking"},
      {keys:["hubungan","pasangan","pacar","putus"], emo:"relationship"},
      {keys:["keluarga","ortu"], emo:"family"},
      {keys:["tidak berharga","gagal","tidak berguna"], emo:"selfworth"}
    ];

    for(const m of mapping){
      if(m.keys.some(k=>text.includes(k))) return m.emo;
    }

    return "unknown";
  }

  function generateReply(emo, userText){

    const replies = {
      anxiety:[
        "Kedengarannya kamu sedang merasa cemas. Tarik napas pelan dulu… aku di sini.",
        "Kecemasan itu berat, tapi kita bisa atur pelan-pelan. Apa yang paling bikin kamu kepikiran akhir-akhir ini?"
      ],
      sad:[
        "Aku ikut merasakan beratnya. Rasa sedih itu valid, kamu nggak salah kalau merasa seperti itu.",
        "Kalau nyaman, boleh ceritakan apa yang paling membuatmu merasa sedih?"
      ],
      lonely:[
        "Kesepian itu salah satu rasa paling menyakitkan. Terima kasih sudah berani cerita.",
        "Siapa orang terakhir yang membuat kamu merasa didengarkan?"
      ],
      burnout:[
        "Kamu terdengar sangat lelah. Burnout itu serius—tubuh dan pikiranmu minta istirahat.",
        "Apa aktivitas terakhir yang benar-benar menguras energimu?"
      ],
      trauma:[
        "Aku turut prihatin kamu mengalami hal yang berat. Kamu aman di sini.",
        "Tidak apa-apa kalau belum siap cerita detailnya. Kita bisa mulai dari perasaan kamu sekarang."
      ],
      sleep:[
        "Tidur yang kacau bisa bikin perasaan makin berat. Mau aku kasih tips relaksasi sebelum tidur?",
        "Biasanya jam berapa kamu mulai susah tidur?"
      ],
      anger:[
        "Emosi itu manusiawi. Tapi pasti melelahkan kalau terus menumpuk.",
        "Apa hal yang paling memicu amarahmu belakangan ini?"
      ],
      overthinking:[
        "Overthinking bikin kepala terasa penuh, ya. Kamu nggak sendirian.",
        "Biasanya pikiran apa yang paling sering muncul berulang?"
      ],
      relationship:[
        "Masalah hubungan sangat berpengaruh ke emosi. Aku dengar kamu.",
        "Sekarang yang paling kamu butuhkan dari pasangan/temanmu apa?"
      ],
      family:[
        "Permasalahan keluarga sering lebih rumit daripada yang terlihat.",
        "Apa yang biasanya memicu ketegangan di keluarga kamu?"
      ],
      selfworth:[
        "Rasa tidak berharga itu berat… tapi aku ingin kamu tahu: keberadaanmu berarti.",
        "Kalau kamu mau, coba ceritakan kapan perasaan itu mulai muncul?"
      ],
      unknown:[
        "Terima kasih sudah cerita. Aku ingin dengar lebih banyak—apa yang paling berat di pikiranmu?",
        "Aku mendengarkan. Coba ceritakan situasinya sedikit lebih detail."
      ]
    };

    return replies[emo];
  }

  async function botReply(text){
    const emo = detectEmotion(text);
    const replySet = generateReply(emo, text);

    // simulate typing effect
    append("...", "bot");
    await delay(600);
    history.lastChild.remove();

    // show 1–2 replies for natural feel
    append(replySet[0], "bot");
    await delay(400);

    if(replySet[1]){
      append(replySet[1], "bot");
    }

    // contextual quick replies
    const qr = document.createElement("div");
    qr.className = "quick-replies";
    qr.style.marginTop = "6px";

    const baseOptions = {
      anxiety:["Latihan napas","Grounding 5-4-3-2-1","Tips tidur"],
      sad:["Self-compassion","Journaling emosi","Hubungi teman"],
      lonely:["Cara membangun koneksi","Ide aktivitas sosial","Konsultasi AI lebih lanjut"],
      burnout:["Atur batas kerja","Break pendek","Manajemen stres"],
      trauma:["Teknik grounding","Tips keamanan emosional","Butuh dukungan"],
      sleep:["Rutinitas tidur","Relaksasi ringan","Kurangi overthinking"],
      overthinking:["Pola pikir", "Teknik berhenti-mikir", "Mindfulness"],
      relationship:["Komunikasi sehat","Tanya kebutuhan","Kelola konflik"],
      family:["Atur jarak sehat","Cara menyampaikan perasaan","Cari dukungan"],
      selfworth:["Affirmation","Temukan nilai diri","Ceritakan pemicunya"],
      unknown:["Ceritakan lebih detail","Lanjutkan cerita","Ingin bimbingan?"]
    };

    baseOptions[emo].forEach(label=>{
      const b = document.createElement("button");
      b.className = "chip";
      b.innerText = label;
      b.onclick = ()=>append("("+label+") fitur lanjutan belum diaktifkan.", "bot");
      qr.appendChild(b);
    });

    history.appendChild(qr);
    history.scrollTop = history.scrollHeight;
  }

  send.onclick = ()=>{
    const text = story.value.trim();
    if(!text) return;

    append(text,"user");
    story.value = "";
    botReply(text);
  };

  clear.onclick = ()=>{ history.innerHTML = ""; };

  quicks.forEach(q=>{
    q.onclick = ()=>{
      story.value = q.innerText;
      send.click();
    };
  });

})();
/* ---------------- SLIDESHOW (sinkron dengan hero) ---------------- */
(function(){
  const photos = [
    "IMG-20251119-WA0021.jpg",
    "IMG-20251119-WA0022.jpg",
    "IMG-20251119-WA0023.jpg",
    "IMG-20251119-WA0024.jpg"
  ];
  let i = 0;
  const img = document.getElementById("slideShow");
  if(!img) return;

  // pre-load images (small, from local upload)
  photos.forEach(src => {
    const im = new Image();
    im.src = src;
  });

  function swap(){
    // fade-out / in
    img.style.opacity = 0;
    setTimeout(()=>{
      img.src = photos[i];
      img.style.opacity = 1;
      i = (i + 1) % photos.length;
    }, 250);
  }
  // initial
  img.src = photos[0];
  i = 1;
  setInterval(swap, 3000);
})();

/* ---------------- SPA NAVIGATION & NAV TOGGLE ---------------- */
(function(){
  const buttons = Array.from(document.querySelectorAll('[data-page]'));
  const pages = Array.from(document.querySelectorAll('.page'));
  const navToggle = document.querySelector('.nav-toggle');
  const menu = document.querySelector('.menu');

  function show(pageId){
    pages.forEach(p => p.classList.toggle('active', p.id === pageId));
    buttons.forEach(b => b.setAttribute('aria-current', b.dataset.page === pageId ? 'true' : 'false'));
    // update hash (but don't add history entry)
    history.replaceState(null,'', '#'+pageId);
    // close mobile menu if open
    if(menu) menu.classList.remove('open');
  }

  // attach listeners to nav buttons (works for hero/result buttons too)
  buttons.forEach(btn => {
    btn.addEventListener('click', (e)=>{
      const id = btn.dataset.page;
      show(id);
    });
  });

  // hero / other controls that have data-page attribute should already be buttons,
  // but also handle delegated clicks for elements with data-page in the document
  document.addEventListener('click', (e)=>{
    const el = e.target.closest('[data-page]');
    if(!el) return;
    // only handle if it's a button-like element (to avoid double-handling nav buttons)
    if(el.dataset && el.dataset.page){
      const page = el.dataset.page;
      // small delay so mobile menu can close nicely
      setTimeout(()=> show(page), 0);
    }
  });

  // initialize from hash or default
  const initial = (location.hash && location.hash.replace('#','')) || 'home';
  // if a page with that id exists use it, otherwise default to home
  const valid = pages.some(p => p.id === initial) ? initial : 'home';
  show(valid);

  // mobile toggle
  if(navToggle && menu){
    navToggle.addEventListener('click', (e)=>{
      e.stopPropagation();
      menu.classList.toggle('open');
    });

    // close when clicking outside
    document.addEventListener('click', (e)=>{
      if(!menu.contains(e.target) && !navToggle.contains(e.target)){
        menu.classList.remove('open');
      }
    });

    // close when resizing to large screens
    window.addEventListener('resize', ()=>{
      if(window.innerWidth > 900){
        menu.classList.remove('open');
      }
    });
  }
})();

/* ---------------- ACCORDION: disorders (ensure idempotent) ---------------- */
(function(){
  document.querySelectorAll('.disorder').forEach(item=>{
    const toggle = item.querySelector('.toggle');
    if(!toggle) return;
    // ensure initial state closed
    item.classList.remove('open');
    toggle.setAttribute('aria-expanded','false');
    toggle.onclick = (ev)=>{
      ev.stopPropagation();
      const isOpen = item.classList.toggle('open');
      toggle.textContent = isOpen ? 'Tutup' : 'Buka detail';
      toggle.setAttribute('aria-expanded', String(isOpen));
    };
    // clicking header toggles too
    const h = item.querySelector('h3');
    if(h) h.onclick = ()=> toggle.click();
  });
})();
<script>
/* ===================== PATCH FINAL ===================== */

/* Fix: tombol chip yang memicu navigasi saat di halaman lain */
document.addEventListener("click", (e)=>{
  const btn = e.target.closest("[data-page]");
  if(!btn) return;
  e.preventDefault();
});

/* Smooth scroll to top setiap ganti halaman */
(function(){
  const pages = document.querySelectorAll(".page");
  const observer = new MutationObserver(()=>{
    const active = document.querySelector(".page.active");
    if(active) window.scrollTo({top:0, behavior:"smooth"});
  });
  observer.observe(document.body, {attributes:true, subtree:true});
})();

/* Lebih lembut pada mobile — menahan layout shifting */
(function(){
  const header = document.querySelector("header");
  if(!header) return;
  const h = header.offsetHeight;
  document.documentElement.style.setProperty("--header-height", h+"px");
})();

/* Tambahan aksesibilitas untuk toggling menu */
document.addEventListener("keydown",(e)=>{
  if(e.key==="Escape"){
    const menu = document.querySelector(".menu");
    if(menu) menu.classList.remove("open");
  }
});

/* Prevent double click spam pada konsultasi */
(function(){
  const send = document.getElementById("sendBtn");
  if(!send) return;

  let locked = false;
  send.addEventListener("click", ()=>{
    if(locked) return;
    locked = true;
    setTimeout(()=> locked=false, 800); // bot response delay
  });
})();

/* Patch: Quiz result animation */
(function(){
  const result = document.getElementById("resultBox");
  if(!result) return;

  const observer = new MutationObserver(()=>{
    if(result.style.display !== "none"){
      result.style.opacity = 0;
      setTimeout(()=> result.style.opacity = 1, 50);
    }
  });
  observer.observe(result, {attributes:true});
})();
</script>
