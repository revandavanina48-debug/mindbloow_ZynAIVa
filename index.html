<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindBloow – Tes Mental & Konsultasi AI</title>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <nav class="navbar">
        <div class="logo"><strong>MindBloow</strong></div>
        <div class="nav-links">
            <a href="#home">Beranda</a>
            <a href="#test">Tes Mental</a>
            <a href="#consult">Konsultasi</a>
        </div>
    </nav>

    <!-- HERO / HOME -->
    <section class="hero" id="home">
        <h1>Selamat Datang di MindBloow</h1>
        <p>Platform interaktif untuk membantu mengenali kondisi mental dan mendapatkan dukungan awal berbasis AI.</p>
        <a class="btn-primary" href="#test">Mulai Tes Sekarang</a>
    </section>

    <!-- SECTION: TES MENTAL -->
    <section class="section" id="test">
        <h2>Tes Mental Interaktif</h2>
        <p>Pilih jawaban yang sesuai dengan kondisi kamu saat ini. Setelah selesai akan muncul hasil dan opsi Simpan / Ulangi / Konsultasi.</p>

        <div class="card">
            <div class="quiz">
                <label>Pertanyaan 1:</label>
                <select id="q1">
                    <option value="0">Tidak Pernah</option>
                    <option value="1">Jarang</option>
                    <option value="2">Sering</option>
                    <option value="3">Hampir Selalu</option>
                </select>

                <label>Pertanyaan 2:</label>
                <select id="q2">
                    <option value="0">Tidak Pernah</option>
                    <option value="1">Jarang</option>
                    <option value="2">Sering</option>
                    <option value="3">Hampir Selalu</option>
                </select>

                <label>Pertanyaan 3:</label>
                <select id="q3">
                    <option value="0">Tidak Pernah</option>
                    <option value="1">Jarang</option>
                    <option value="2">Sering</option>
                    <option value="3">Hampir Selalu</option>
                </select>

                <button class="btn-primary" onclick="calculateScore()">Lihat Hasil</button>

                <div id="result" style="margin-top: 20px; font-weight: 600;"></div>

                <!-- NEW AREA: Buttons (Simpan / Ulangi / Konsultasi) -->
                <div id="actionButtons" style="margin-top:20px; display:none; gap:10px;">
                    <button class="btn-primary" id="saveResult">Simpan Hasil</button>
                    <button class="btn-primary" onclick="resetTest()">Ulangi</button>
                    <a class="btn-primary" href="#consult">Konsultasi</a>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: KONSULTASI AI -->
    <section class="section alt" id="consult">
        <h2>Konsultasi AI</h2>
        <p>Ceritakan apa yang kamu rasakan, AI akan memberikan tanggapan suportif.</p>

        <div class="card ai-box">
            <textarea id="userInput" placeholder="Ceritakan perasaanmu..." rows="3"></textarea>
            <button class="btn-primary" onclick="respondAI()">Kirim</button>

            <div id="aiResponse" class="ai-response"></div>
        </div>
    </section>

    <footer>
        <p>© 2025 MindBloow – Platform Edukasi & Dukungan Mental Berbasis AI</p>
    </footer>

    <!-- Script -->
    <script src="app.js"></script>

    <!-- Extra Script for Save Feature -->
    <script>
        function resetTest() {
            document.getElementById("q1").value = "0";
            document.getElementById("q2").value = "0";
            document.getElementById("q3").value = "0";

            document.getElementById("result").innerText = "";
            document.getElementById("actionButtons").style.display = "none";
        }

        // Override result display after original calculateScore()
        const originalCalc = calculateScore;
        calculateScore = function () {
            originalCalc();

            const result = document.getElementById("result").innerText;
            if (result.trim() !== "") {
                document.getElementById("actionButtons").style.display = "flex";
            }

            // Save button
            document.getElementById("saveResult").onclick = function () {
                const data = {
                    result: result,
                    q1: document.getElementById("q1").value,
                    q2: document.getElementById("q2").value,
                    q3: document.getElementById("q3").value,
                    timestamp: new Date().toISOString()
                };

                let saved = JSON.parse(localStorage.getItem("mindbloow_results") || "[]");
                saved.push(data);
                localStorage.setItem("mindbloow_results", JSON.stringify(saved));

                alert("Hasil berhasil disimpan!");
            };
        };
    </script>

</body>
</html>
